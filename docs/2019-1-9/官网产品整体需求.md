# 官网产品整体需求

### 编辑信息

|编写日期|编写人|版本|修改记录|
|----|-----|----|----|
| 2018-12-24 | 王科慧 |v0.18.12.0|整体设计起草|
| 2019-1-9 | 王科慧 |v0.1.9.0|修改文件上传，app的业务定义，文档的历史记录与删除，取消了图片信息|

### 产品需求内容

|编号   | 功能分类  | 说明  | 优先级  | 后端  | 前端  | 备注  |
| ------------ | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| 1  | 编辑目录  | 便于用户查找文档  | P1  | 拥有增删改查四个功能接口  | 实现增删改查功能  | 控制参数前端控制  |
| 2  | 编辑文档  | 用户查看具体信息内容  | P1  | 拥有增删改查四个功能接口  | 实现增删改查功能  | 控制参数前端控制  |
|3|上传文件 |官网展示图片或可下载的附件|P1|拥有增删改查四个功能接口|实现增删改查功能|前端需指明存储的父级位置|
|4|用户账号|管理员的账号管理|P1|拥有增删改查四个功能接口|实现增删改查功能|管理员有审核，其他次管理员没有审核功能|
|5|登录信息|账户管理登录编辑的认证|P1|利用用户账号的功能|控制账户的验证模式|控制管理由前端把握 |
|6|app|app管理的编辑包括ios，android|P1|拥有增删改查四个功能接口|实现增删改查功能|前端进行控制|

### 产品个别具体情况说明细分

1. 编辑目录说明
 1.1 一级目录是无上级目录信息的，因此不需要传入父级id，而目录又分为二级目录文件夹与文档，当一级目录进行展开显示之时只需展示当前显示目录，后端无需将所有的底层文档目录信息返回，进行分层次查询结果并返回。
 1.2 目录并不设置只有几层，因此需要强大的扩展性，可多层次深入。
 1.3 文档目录的增删改查是由文档编辑来进行决定的，因此在目录中直接操作文档目录是不允许的，相关注意说明在编辑文档说明中。
 1.4 文件目录的增删改查是由文件编辑来进行决定的。
 1.5 目录官网前端显示有个字段来判断，0为不显示1为显示。

2. 编辑文档说明
 2.1 编辑文档在新增时是处于草稿阶段，这时是不会触发新增目录的功能，只有通过审核的才会触发并且在目录中查看到该对应的文档目录。
 2.2 编辑文档在进行删除之时，如果是审核的则也需要删除对应的文档目录信息
 2.3 编辑文档在进行修改之时，处在审核过的都要触发更新文档目录信息，如果是草稿则不需要。
 2.4 编辑文档在进行查询时，可能关联着附件，因此需要将附件的路径一并返回。但附件上传的具体说明在编辑附件说明上。
 2.5 编辑文档在修改的时候会自动保存一条新数据，保存五条历史数据，所有数据只能有一条是审核过的，其它都致为草稿。
 2.6 当查询文档数据时默认为最新的数据，如果需要查询所有历史数据则返回全部。
 2.7 文档删除不会真删除状态，只是保存在数据中，并且状态致为删除状态而已，如果真要删除时将所历史保存的草稿文档与发布文档都删除。
 2.8 文档更新的时候会自动保存一条新数据，如果是审核的则将原来审核的目录数据进行删除置换为当前的，如果没有审核则会保留原始的审核文档。
 2.9 记录有五条历史记录，一条为现在编辑的数据，总共6条，当保存需要删除最老的那条的时候，需要判断是否是审核过的，如果是则不需删除该条，删除第二条老数据。
 2.10 查询分为两种，一种直接查询所有最新编辑的文档数据，一种是指定id查询历史数据或当前对应的id数据。
 2.11 文档删除只是改变了状态并没有完全删除，如果type为clear则将所有删除状态的数据都清理了。
 2.12 文档有回滚作用，选择对应的文档Document_Id就可以还原所有对应的数据。
 2.13 文档可以查询删除到垃圾箱的数据。

3. 编辑文件说明
 3.1 编辑文件上传也包括轮播图与其他所有的文件内容，没有任何的限制。存储在目录里或是文档里，两者必传其中一个对应的父类id。
 3.2 编辑文件删除也是需要父级id和出处，寻找不同的表单进行删除操作。
 3.3 编辑文件查询，包含在文档底层或目录的，在文档或目录查询中就可以看到所有对应的子文件的所有信息，因此文件是无法进行查询请求的。

4. App说明
 4.1 app上传则需要管理人员主动输入版本号，名称和大小，后端不需要自己主动去读取文档查询。
 4.2 app查询分为三种模式的查询，new/all/10，可以直接查询最新的app版本，也可以全部查出来，或则查询最新的10个版本，而这个10个最新版本则用简单的话来说就是最多为10个，因此版本有多少个都最多展示10个。
 4.3 对应的App上传的ios是可以进行多文件上传的。

5. 用户说明
 5.1 用户第一管理员则不要进行新增功能，而其他管理员则由该管理员进行添加，删除。
 5.2 用户第一管理员是有审核文档的权限，而其他的是没有的，只能编辑，修改，但删除也只能是草稿版的，审核过的文档是不允许没有权限的人去删除的。
 5.3 用户查询可以查询当前用户，或是全部或是对应创建管理员底下的所有管理员。


##备注
- 具体化后端与前端的需求内容则在禅道产品需求中对应。